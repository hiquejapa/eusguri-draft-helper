:root {
  color-scheme: dark;
  --bg-900: #0f111a;
  --bg-850: #151823;
  --bg-800: #1b1f2d;
  --bg-750: #202538;
  --border: #2c3248;
  --border-strong: #3a415d;
  --text-100: #f5f7ff;
  --text-300: #ccd2f0;
  --text-500: #8f95b2;
  --accent-blue: #3a82f7;
  --accent-green: #3ecf8e;
  --accent-orange: #f6a344;
  --accent-red: #f45c60;
  --accent-purple: #a46ff9;
  --accent-teal: #34c4b3;
  --accent-sky: #51c2ff;
  --accent-gray: #606889;
  --panel-height: 1800px;                 /* altura total da coluna */
  --panel-team-card-height: 3000px;       /* padrão da coluna Meu Time */
  --panel-team-bans-height: 220px;       /* card específico */
  --panel-team-composition-height: 535px;
  --panel-team-tags-height: 210px;
  --panel-team-sinergias-height: 780px;
  --synergy-primary-height: 754px;       /* “Sinergias” central */
  --synergy-secondary-height: 990px;     /* “Matchups” central */
  --panel-enemy-card-height: 3000px;      /* padrão da coluna Inimigo */
  --panel-enemy-bans-height: 220px;
  --panel-enemy-composition-height: 535px;
  --panel-enemy-tags-height: 210px;
  --panel-enemy-combos-height: 780px;
  font-family: "Segoe UI", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  background: var(--bg-900);
  color: var(--text-100);
}

*,
*::before,
*::after {
  box-sizing: border-box;
}

body {
  margin: 0;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  background: var(--bg-900);
}

.app-header,
.app-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem 2rem;
  border-bottom: 1px solid var(--border);
  background: linear-gradient(180deg, rgba(27, 31, 45, 0.95), rgba(27, 31, 45, 0.7));
  backdrop-filter: blur(12px);
  position: sticky;
  top: 0;
  z-index: 10;
}

.header-actions { display: flex; align-items: center; gap: 0.75rem; }
.header-note { font-size: 0.85rem; }

/* Header control: min-synergy-games input styling (controls MIN_SYNERGY_GAMES) */
#min-synergy-games {
  width: 6ch; /* slightly larger to improve usability */
  padding: 0.22rem 0.35rem;
  border-radius: 0.35rem;
  border: 1px solid rgba(90,98,132,0.4);
  background: transparent;
  color: var(--text-100);
  font-size: 0.9rem;
}

/* Remove number input spinners (WebKit + Firefox) and center the value */
#min-synergy-games {
  -moz-appearance: textfield; /* Firefox */
  appearance: textfield;
  text-align: center;
}
#min-synergy-games::-webkit-outer-spin-button,
#min-synergy-games::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

/* Simple CSS tooltip using data-tooltip placed on the wrapper label.
   Inputs are replaced elements and don't reliably accept ::before/::after
   in some browsers, so attach the tooltip to the label and use
   :focus-within so keyboard focus shows it as well. */
label[data-tooltip] {
  position: relative; /* anchor for pseudo-element */
}
/* Tooltip below the control (styled to match the team score tooltip) */
label[data-tooltip]::after,
label[data-tooltip]::before {
  transition: opacity 160ms ease, transform 160ms ease;
  opacity: 0;
  pointer-events: none;
}
label[data-tooltip]::after {
  content: attr(data-tooltip);
  position: absolute;
  left: 50%;
  transform: translateX(-50%) translateY(-4px);
  top: calc(100% + 8px); /* place tooltip below the input */
  background: linear-gradient(180deg, rgba(20,24,36,0.98), rgba(15,18,28,0.98));
  color: var(--text-100);
  font-size: 0.85rem;
  padding: 0.5rem 0.65rem;
  border-radius: 0.45rem;
  border: 1px solid rgba(255,255,255,0.06);
  white-space: nowrap;
  box-shadow: 0 8px 30px rgba(2,6,23,0.6);
  z-index: 9999;
  max-width: 320px;
}
/* small arrow (triangle) pointing up toward the input */
label[data-tooltip]::before {
  content: '';
  position: absolute;
  left: 50%;
  transform: translateX(-50%) translateY(-2px);
  top: calc(100% + 2px);
  border-width: 0 7px 7px 7px; /* triangle pointing up */
  border-style: solid;
  border-color: transparent transparent rgba(20,24,36,0.98) transparent;
  z-index: 9999;
}
label[data-tooltip]:hover::after,
label[data-tooltip]:focus-within::after,
label[data-tooltip]:hover::before,
label[data-tooltip]:focus-within::before {
  opacity: 1;
  transform: translateX(-50%) translateY(0);
}

/* When JS floating tooltip is enabled, hide the CSS pseudo-element tooltip
   to avoid duplicate tooltips. JS will add `.floating-tooltip-enabled` to body. */
body.floating-tooltip-enabled label[data-tooltip]::after,
body.floating-tooltip-enabled label[data-tooltip]::before {
  display: none !important;
}

/* Floating tooltip appended to body (used when JS is available). This
   provides robust positioning and prevents clipping at viewport edges. */
.floating-tooltip {
  position: absolute;
  background: linear-gradient(180deg, rgba(20,24,36,0.98), rgba(15,18,28,0.98));
  border: 1px solid rgba(255,255,255,0.06);
  padding: 0.5rem 0.65rem;
  border-radius: 0.45rem;
  color: var(--text-100);
  font-size: 0.85rem;
  box-shadow: 0 8px 30px rgba(2,6,23,0.6);
  z-index: 10000;
  pointer-events: none;
  max-width: 320px;
  display: none;
}
.floating-tooltip .arrow {
  position: absolute;
  width: 0;
  height: 0;
  left: 50%;
  transform: translateX(-50%);
  top: -7px;
  border-width: 7px 7px 0 7px;
  border-style: solid;
  border-color: rgba(20,24,36,0.98) transparent transparent transparent;
}
.floating-tooltip.above .arrow {
  bottom: -7px;
  top: auto;
  border-width: 0 7px 7px 7px;
  border-color: transparent transparent rgba(20,24,36,0.98) transparent;
}
.floating-tooltip .content { display: block; }

.app-footer {
  border-top: 1px solid var(--border);
  border-bottom: none;
  bottom: 0;
  top: auto;
  margin-top: auto;
  background: linear-gradient(0deg, rgba(27, 31, 45, 0.95), rgba(27, 31, 45, 0.6));
}

.logo {
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--text-300);
}

.badge {
  display: inline-flex;
  align-items: center;
  border-radius: 999px;
  padding: 0.25rem 0.75rem;
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  font-weight: 600;
}

.badge-alpha {
  background: rgba(164, 111, 249, 0.18);
  color: var(--accent-purple);
  border: 1px solid rgba(164, 111, 249, 0.35);
}

.ghost-button {
  border: 1px solid var(--border);
  background: transparent;
  color: var(--text-300);
  padding: 0.4rem 0.8rem;
  border-radius: 0.4rem;
  font-size: 0.8rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  cursor: pointer;
}

.ghost-button:hover {
  border-color: var(--accent-blue);
  color: var(--accent-blue);
}

.app-grid {
  flex: 1;
  display: grid;
  /* Use percentages so column widths are predictable: sides larger, middle smaller */
  grid-template-columns: 35.5% 28% 35.5%;
  grid-template-rows: 1fr;
  gap: 1.5rem;
  padding: 1.5rem 2rem 2.5rem;
  overflow: hidden;
  height: var(--panel-height);
  max-height: var(--panel-height);
  /* Allow children to manage their own overflow */
  min-height: 0;
}

.panel {
  display: flex;
  flex-direction: column;
  gap: 0;
  /* Important for nested flex scrolling: allow children to shrink */
  min-height: 0;
  height: 100%;
  overflow-y: auto;
}

/* Prevent the Insights column from growing vertically; inner cards scroll */
.panel-synergy {
  min-height: 0;
  overflow: hidden;
}

/* Specific layout fixes for the Top Sinergias card inside the Meu Time panel.
   Ensure the 'combos' list and the 'Sinergias dos escolhidos' section don't
   overlap by giving each a flexible area and internal scrolling when needed. */
.panel-team .card.card-scroll[data-panel="sinergias"] .card-body {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  min-height: 0; /* allow children to shrink */
}

.panel-team .card.card-scroll[data-panel="sinergias"] .card-body > .list.combos {
  /* top area: show combos, allow it to shrink/grow and scroll */
  flex: 1 1 40%;
  min-height: 0;
  overflow-y: auto;
}

.panel-team .card.card-scroll[data-panel="sinergias"] .card-body .list-section {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  flex: 1 1 60%;
  min-height: 0;
}

.panel-team .card.card-scroll[data-panel="sinergias"] .card-body .list-section .list {
  /* make the inner list scrollable without growing past the card */
  flex: 1 1 auto;
  min-height: 0;
  overflow-y: auto;
}

.panel-title {
  margin: 0;
  font-size: 1.1rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: var(--text-300);
}

.card {
  background: var(--bg-850);
  border: 1px solid var(--border);
  border-radius: 0.75rem;
  box-shadow: 0 12px 36px rgba(10, 12, 20, 0.6);
  display: flex;
  flex-direction: column;
  /* Prevent flex overflow issues so body can scroll inside */
  min-height: 0;
}

.card-scroll {
  flex: 0 0 auto;
  overflow: hidden;
  min-height: 0;
}
.card.card-scroll {
  height: var(--panel-scroll-height, auto);
}
.panel-team .card.card-scroll {
  height: var(--panel-team-card-height, var(--panel-scroll-height, auto));
}
.panel-team .card.card-scroll[data-panel="bans"] {
  height: var(--panel-team-bans-height, var(--panel-team-card-height, var(--panel-scroll-height, auto)));
}
.panel-team .card.card-scroll[data-panel="composition"] {
  height: var(--panel-team-composition-height, var(--panel-team-card-height, var(--panel-scroll-height, auto)));
}
.panel-team .card.card-scroll[data-panel="tags"] {
  height: var(--panel-team-tags-height, var(--panel-team-card-height, var(--panel-scroll-height, auto)));
}
.panel-team .card.card-scroll[data-panel="sinergias"] {
  height: var(--panel-team-sinergias-height, var(--panel-team-card-height, var(--panel-scroll-height, auto)));
}
.panel-enemy .card.card-scroll {
  height: var(--panel-enemy-card-height, var(--panel-scroll-height, auto));
}
.panel-enemy .card.card-scroll[data-panel="bans"] {
  height: var(--panel-enemy-bans-height, var(--panel-enemy-card-height, var(--panel-scroll-height, auto)));
}
.panel-enemy .card.card-scroll[data-panel="composition"] {
  height: var(--panel-enemy-composition-height, var(--panel-enemy-card-height, var(--panel-scroll-height, auto)));
}
.panel-enemy .card.card-scroll[data-panel="tags"] {
  height: var(--panel-enemy-tags-height, var(--panel-enemy-card-height, var(--panel-scroll-height, auto)));
}
.panel-enemy .card.card-scroll[data-panel="combos"] {
  height: var(--panel-enemy-combos-height, var(--panel-enemy-card-height, var(--panel-scroll-height, auto)));
}
.card.card-scroll .card-body {
  flex: 1 1 auto;
  min-height: 0;
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: hidden;
}
.card.card-scroll .card-body > .list {
  flex: 1 1 auto;
  min-height: 0;
}
.panel-team .card.card-scroll .card-body,
.panel-enemy .card.card-scroll .card-body {
  overflow-y: auto;
  scrollbar-width: thin;
  scrollbar-color: var(--accent-blue) rgba(44,50,72,0.6);
}
.panel-team .card.card-scroll .card-body::-webkit-scrollbar,
.panel-enemy .card.card-scroll .card-body::-webkit-scrollbar {
  width: 0.5rem;
}
.panel-team .card.card-scroll .card-body::-webkit-scrollbar-track,
.panel-enemy .card.card-scroll .card-body::-webkit-scrollbar-track {
  background: rgba(27,31,45,0.55);
  border-radius: 999px;
}
.panel-team .card.card-scroll .card-body::-webkit-scrollbar-thumb,
.panel-enemy .card.card-scroll .card-body::-webkit-scrollbar-thumb {
  background: var(--accent-blue);
  border-radius: 999px;
}

/* Nos paineis de Sinergias (coluna central) usamos medidas fixas para facilitar ajustes manuais */
.panel-synergy .card-scroll {
  flex: 0 0 auto;
  min-height: 0;
  overflow: hidden;
}
.panel-synergy .card.card-scroll:first-of-type {
  height: var(--synergy-primary-height);
}
.panel-synergy .card.card-scroll:last-of-type {
  height: var(--synergy-secondary-height);
}

/* Ensure scroll happens inside the card body, not by growing the card */
.panel-synergy .card.card-scroll {
  min-height: 0;
}
.panel-synergy .card.card-scroll .card-body > .list {
  flex: 1 1 auto;
  min-height: 0;
  overflow-y: auto;
  scrollbar-width: thin;
  scrollbar-color: var(--accent-blue) rgba(44,50,72,0.6);
}
.panel-synergy .card.card-scroll .card-body > .list::-webkit-scrollbar {
  width: 0.5rem;
}
.panel-synergy .card.card-scroll .card-body > .list::-webkit-scrollbar-track {
  background: rgba(27,31,45,0.55);
  border-radius: 999px;
}
.panel-synergy .card.card-scroll .card-body > .list::-webkit-scrollbar-thumb {
  background: var(--accent-blue);
  border-radius: 999px;
}

.card-header {
  padding: 1rem 1.25rem 0.5rem;
  border-bottom: 1px solid rgba(44, 50, 72, 0.6);
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.card-header h3 {
  margin: 0;
  font-size: 1rem;
}

.card-subtitle {
  font-size: 0.8rem;
  color: var(--text-500);
}

.card-controls {
  margin-top: 0.5rem;
  display: flex;
  gap: 0.5rem;
}

.lane-filter,
.matchup-filter-group {
  flex-wrap: wrap;
  align-items: center;
  justify-content: center;
}

.filter-button {
  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
  padding: 0.35rem 0.65rem;
  background: rgba(44, 50, 72, 0.6);
  border: 1px solid rgba(90, 98, 132, 0.4);
  border-radius: 999px;
  color: var(--text-300);
  font-size: 0.9rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  cursor: pointer;
  transition: border-color 0.15s ease, background 0.15s ease, color 0.15s ease;
}

/* Botões apenas com ícone (sem texto) */
.filter-button:has(img:only-child) {
  padding: 0.45rem;
  min-width: 32px;
  min-height: 32px;
  justify-content: center;
}

.filter-button img {
  width: 18px;
  height: 18px;
  opacity: 0.6;
  transition: opacity 0.15s ease;
}

.filter-button.is-active img {
  opacity: 1;
}

.filter-button.is-active {
  background: rgba(58, 130, 247, 0.2);
  border-color: rgba(58, 130, 247, 0.6);
  color: var(--text-100);
}

.filter-button:not(.is-active):hover {
  border-color: rgba(58, 130, 247, 0.4);
}

.filter-button:not(.is-active):hover img {
  opacity: 0.8;
}

.card-body {
  padding: 1rem 1.25rem;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  overflow: auto;
  /* Make body occupy remaining card height and scroll internally */
  flex: 1 1 auto;
  min-height: 0;
}

.grid {
  display: grid;
  gap: 1rem;
}

.grid-2 {
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
}

.ban-group {
  /* Use a 5-column implicit grid and place items in alternating columns
     so the top row items sit in columns 1,3,5 and the bottom row items
     sit between them (2 and 4). This visually centers the two bottom
     bans between the three top bans. */
  display: grid; /* ensure grid (overrides other utility classes if present) */
  grid-auto-flow: row;
  grid-template-columns: repeat(5, minmax(0, 1fr));
  gap: 0;
  align-items: start;
  justify-items: stretch;
  overflow: visible; /* allow children to overflow grid cells */
}

@media (max-width: 640px) {
  .ban-group {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

/* Specific override to ensure ban groups always render as a 3-column grid
   in normal desktop layouts. Using higher-specificity selector and
   !important to avoid accidental overrides by utility classes. */
.card-body.ban-group,
.card-body.grid.ban-group {
  display: grid !important;
  grid-auto-flow: row !important;
  grid-template-columns: repeat(5, minmax(0, 1fr)) !important;
  gap: 0 !important;
  align-items: start !important;
  justify-items: stretch !important;
}

/* Allow horizontal overflow inside the bans card body so selects can
   visually extend beyond their grid cell boundaries. Keep vertical
   scrolling enabled. */
.card.card-scroll[data-panel="bans"] .card-body {
  overflow-x: visible !important;
  overflow-y: auto !important;
}

/* Place items in alternating columns so top row uses 1,3,5 and bottom row 2,4 */
.ban-group .field:nth-child(1) { grid-column: 1 !important; }
.ban-group .field:nth-child(2) { grid-column: 3 !important; }
.ban-group .field:nth-child(3) { grid-column: 5 !important; }
.ban-group .field:nth-child(4) { grid-column: 2 !important; }
.ban-group .field:nth-child(5) { grid-column: 4 !important; }

@media (max-width: 640px) {
  /* On small screens, fall back to 2 columns and natural flow */
  .card-body.ban-group,
  .card-body.grid.ban-group { grid-template-columns: repeat(2, minmax(0, 1fr)) !important; }
  .ban-group .field:nth-child(1),
  .ban-group .field:nth-child(2),
  .ban-group .field:nth-child(3),
  .ban-group .field:nth-child(4),
  .ban-group .field:nth-child(5) {
    grid-column: auto !important;
    justify-self: stretch !important;
  }
}

.ban-group .field {
  align-items: flex-start;
  /* Center the field inside its grid column and allow it to be wider than
     the column so the select can visually overflow the grid. */
  justify-self: center;
  width: 100%;
  max-width: 130px; /* max width of the field (select will fit inside) */
  transform: translateX(0);
  transition: transform 120ms ease;
}

.ban-group select {
  /* Make select wider than the column so it overflows across columns. */
  width: 130px;
  max-width: none;
  position: relative; /* allow positional adjustments if needed */
}

@media (max-width: 960px) {
  /* On narrower viewports revert selects to full width of their cell */
  .ban-group .field { max-width: none; justify-self: stretch; }
  .ban-group select { width: 100%; }
  .card.card-scroll[data-panel="bans"] .card-body { overflow-x: auto !important; }
  /* remove any visual overlap on small screens */
  .ban-group .field { transform: none !important; }
}

/* Shift fields slightly left to emulate a negative gap (visual overlap)
   This is safer than negative gap on grid; adjust value as needed */
.ban-group .field:not(:first-child) {
  transform: translateX(-30px);
}

@media (max-width: 640px) {
  /* ensure no overlap on very small screens */
  .ban-group .field:not(:first-child) { transform: none !important; }
}

.ban-rate {
  font-size: 0.75rem;
  color: var(--text-500);
}

.field {
  display: flex;
  flex-direction: column;
  gap: 0.4rem;
  font-size: 0.85rem;
  color: var(--text-300);
}

.field-inline {
  flex: 1;
}

select,
textarea {
  background: var(--bg-800);
  border: 1px solid var(--border);
  color: var(--text-100);
  border-radius: 0.5rem;
  padding: 0.5rem 0.75rem;
  font-size: 0.9rem;
  transition: border-color 0.15s ease, box-shadow 0.15s ease;
}

select:focus,
textarea:focus {
  outline: none;
  border-color: var(--accent-blue);
  box-shadow: 0 0 0 2px rgba(58, 130, 247, 0.2);
}

textarea {
  min-height: 150px;
  resize: vertical;
}

.role-list {
  list-style: none;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.role-list li {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  background: rgba(27, 31, 45, 0.55);
  padding: 0.75rem;
  border-radius: 0.6rem;
  border: 1px solid rgba(58, 65, 93, 0.4);
}

.role {
  text-transform: uppercase;
  font-size: 0.75rem;
  letter-spacing: 0.1em;
  color: var(--text-500);
  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
}

.role-icon {
  width: 22px;
  height: 22px;
  object-fit: contain;
}

.role-select {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  flex-direction: row;
  flex-wrap: nowrap; /* manter na mesma linha quando possível */
}

/* Ícones de campeão ao lado dos selects e textos */
.champ-icon {
  /* Champion icon sizing - edit these values to change icon size across the UI.
     Keep the inner image rules (.champ-icon img { width:100%; height:100%; }) so
     the actual <img> scales to the container. Typical alternate sizes: 24px, 32px.
  */
  box-sizing: content-box;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  overflow: hidden;
  border: 1px solid rgba(255,255,255,0.15);
  background: rgba(255,255,255,0.05);
  flex: 0 0 auto;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}
.champ-icon img {
  width: 120%;
  height: 120%;
  display: block;
  object-fit: cover;
}
.select-with-icon { display: flex; align-items: center; gap: 0.5rem; }
.field > .select-with-icon { width: 100%; }
.champ-inline { display: inline-flex; align-items: center; gap: 0.35rem; white-space: nowrap; vertical-align: middle; }
.champ-inline .champ-icon {
  width: 32px;
  height: 32px;
  border: none;
  background: transparent;
  flex: 0 0 auto;
}

.pill-row {
  display: flex;
  flex-wrap: wrap;
  gap: 0.4rem;
}

.pill {
  display: inline-flex;
  align-items: center;
  border: none;
  padding: 0.3rem 0.6rem;
  border-radius: 999px;
  font-size: 0.75rem;
  text-transform: capitalize;
  letter-spacing: 0.02em;
  font-weight: 600;
  color: var(--text-100);
  background: rgba(96, 104, 137, 0.35);
  cursor: pointer;
  line-height: 1.2;
  transition: transform 0.15s ease, background 0.15s ease, box-shadow 0.15s ease;
}

.pill:hover {
  transform: translateY(-1px);
}

.pill.is-active {
  box-shadow: 0 0 12px rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.pill-blue { background: rgba(58, 130, 247, 0.25); color: #78a9ff; }
.pill-green { background: rgba(62, 207, 142, 0.25); color: #5ae5a6; }
.pill-orange { background: rgba(246, 163, 68, 0.25); color: #ffbe7d; }
.pill-red { background: rgba(244, 92, 96, 0.25); color: #ff8e92; }
.pill-purple { background: rgba(164, 111, 249, 0.25); color: #d5b6ff; }
.pill-teal { background: rgba(52, 196, 179, 0.25); color: #7ee9dc; }
.pill-sky { background: rgba(81, 194, 255, 0.25); color: #a6e3ff; }
.pill-gray { background: rgba(96, 104, 137, 0.35); color: #c5cadf; }

/* Cores por categoria (CSV) */
.pill-gameplay { background: rgba(246, 163, 68, 0.65); color: #1b1205; border: 1px solid rgba(246,163,68,0.9); }
.pill-spike { background: rgba(164, 111, 249, 0.65); color: #120e1a; border: 1px solid rgba(164,111,249,0.9); }
.pill-synergy { background: rgba(52, 196, 179, 0.65); color: #071a18; border: 1px solid rgba(52,196,179,0.9); }

.tag-cloud {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  min-height: 50px;
}

/* Em tag-cloud, mantenha a cor das categorias; sÃ³ neutralize quando nÃ£o houver categoria definida */
.tag-cloud .pill:not(.pill-gameplay):not(.pill-spike):not(.pill-synergy) {
  background: rgba(44, 50, 72, 0.7);
  color: var(--text-300);
  border: 1px solid rgba(90, 98, 132, 0.45);
  cursor: default;
}

.tag-group { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 0.5rem; width: 100%; }
.tag-row { display: flex; flex-wrap: wrap; gap: 0.5rem; width: 100%; margin-bottom: 2px; }

.list {
  list-style: none;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

/* Garantir que a aba Sinergias tenha rolagem interna em vez de crescer */
.panel-synergy .list.synergies { min-height: 0; }

.list li {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.75rem;
  border-radius: 0.6rem;
  background: rgba(27, 31, 45, 0.55);
  border: 1px solid rgba(58, 65, 93, 0.4);
}
.panel-synergy .list.synergies > li > .pill {
  font-size: 1.2rem;
  padding: 0.45rem 0.9rem;
  width: 3.75rem;
  justify-content: center;
  align-items: center;
  text-align: center;
  font-variant-numeric: tabular-nums;
}

.list li.empty {
  justify-content: center;
  align-items: center;
  font-style: italic;
  color: var(--text-500);
}

.list li strong {
  display: block;
  font-size: 0.95rem;
  margin-bottom: 0.25rem;
}

.list-section {
  margin-top: 1.25rem;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.list-section .list {
  margin: 0;
}

.list-title {
  margin: 0;
  font-size: 0.85rem;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: var(--text-500);
}

.muted {
  color: var(--text-500);
  font-size: 0.8rem;
}

.score {
  display: flex;
  flex-direction: column;
  gap: 0.2rem;
}

.score strong {
  font-size: 1.2rem;
}

.footer-right {
  color: var(--text-500);
  font-size: 0.85rem;
}

/* Tooltip para breakdown do score */
#score-tooltip {
  position: absolute;
  background: linear-gradient(180deg, rgba(20,24,36,0.98), rgba(15,18,28,0.98));
  border: 1px solid rgba(255,255,255,0.06);
  padding: 0.5rem 0.65rem;
  border-radius: 0.45rem;
  color: var(--text-100);
  font-size: 0.85rem;
  box-shadow: 0 8px 30px rgba(2,6,23,0.6);
  z-index: 9999;
  pointer-events: none;
  max-width: 320px;
}
#score-tooltip .line { margin: 0 0 0.25rem 0; }
#score-tooltip .line:last-child { margin-bottom: 0; font-weight: 700; }

/* breakdown visuals inside tooltip */
#score-tooltip .score-line { display: flex; flex-direction: column; gap: 0.25rem; margin-bottom: 0.45rem; }
#score-tooltip .score-meta { display: flex; justify-content: space-between; gap: 0.5rem; font-size: 0.85rem; color: var(--text-300); }
#score-tooltip .score-meta.small { font-size: 0.75rem; color: var(--text-500); }
#score-tooltip .score-line .label { font-weight: 600; color: var(--text-100); }
#score-tooltip .score-line .value { min-width: 48px; text-align: right; }
#score-tooltip .bar {
  width: 100%;
  height: 6px;
  background: rgba(255,255,255,0.04);
  border-radius: 99px;
  overflow: hidden;
  display: flex;
  align-items: center;
  position: relative;
  border: 1px solid rgba(255,255,255,0.07);
  box-shadow: inset 0 0 0 1px rgba(2, 6, 23, 0.35);
}
#score-tooltip .bar-inner {
  height: 100%;
  width: 0%;
  transition: width 180ms ease, background 220ms ease, opacity 200ms ease;
  border-radius: inherit;
  position: relative;
  box-shadow: 0 0 6px rgba(0, 0, 0, 0.35);
  filter: saturate(120%);
}
#score-tooltip .bar-inner::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(90deg, rgba(255,255,255,0.35), rgba(255,255,255,0));
  opacity: 0.55;
  pointer-events: none;
}
#score-tooltip .bar-inner.is-negative::after {
  transform: scaleX(-1);
}

.compact {
  padding: 0.35rem 0.5rem;
  font-size: 0.75rem;
}

@media (max-width: 1400px) {
  .app-grid {
    grid-template-columns: 1.2fr 1fr;
  }
  .panel-synergy {
    grid-column: span 2;
  }
}

@media (max-width: 960px) {
  .app-grid {
    grid-template-columns: 1fr;
    height: auto;
    max-height: none;
  }
  .panel {
    order: var(--order, 0);
    height: auto;
    overflow: visible;
  }
  .card.card-scroll {
    height: auto;
    max-height: none;
  }
  .panel-team .card.card-scroll,
  .panel-enemy .card.card-scroll {
    height: auto;
  }
  .panel-synergy .card.card-scroll:first-of-type,
  .panel-synergy .card.card-scroll:last-of-type {
    height: auto;
  }
  .panel-synergy {
    --order: 3;
  }
  .panel-enemy {
    --order: 2;
  }
}

/* Mirror and center panel titles */
.panel-team .panel-title { text-align: left; }
.panel-synergy .panel-title { text-align: center; }
.panel-enemy .panel-title { text-align: right; }

/* Center card headers and controls in the middle column for better symmetry */
.panel-synergy .card-header { align-items: center; text-align: center; }
.panel-synergy .card-header .card-controls { justify-content: center; }

/* Right-align card headers and controls in the enemy panel */
.panel-enemy .card-header { align-items: flex-end; text-align: right; }
.panel-enemy .card-header .card-controls { justify-content: flex-end; }
.panel-enemy .list-title { text-align: right; }

/* Overrides para agrupamento e cores mais fortes das categorias */
.tag-cloud { display: flex; flex-direction: column; gap: 0.5rem; flex-wrap: nowrap; }
.tag-group { width: 100%; }
.tag-row { display: flex; flex-wrap: wrap; gap: 0.5rem; width: 100%; }
.pill-gameplay { background: rgba(246, 163, 68, 0.48) !important; color: #ffd4a1 !important; border: 1px solid rgba(246,163,68,0.65) !important; }
.pill-spike { background: rgba(164, 111, 249, 0.48) !important; color: #e7d7ff !important; border: 1px solid rgba(164,111,249,0.65) !important; }
.pill-synergy { background: rgba(52, 196, 179, 0.48) !important; color: #b6fff5 !important; border: 1px solid rgba(52,196,179,0.65) !important; }
.champ-tags { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 0.5rem; }
.role-select > .select-with-icon { width: auto; flex: 0 0 auto; }
.role-select select { min-width: 180px; }
.role-select .champ-tags { margin-top: 0; flex: 1 1 auto; gap: 0.35rem; }
.role-select .champ-tags .pill { padding: 0.22rem 0.45rem; font-size: 0.72rem; }

/* Densidade otimizada para 1080p */
@media (max-height: 1080px) and (min-width: 1200px) {
  html, body { font-size: 15px; }
  .app-header, .app-footer { padding: 0.6rem 1.2rem; }
  .logo { font-size: 0.95rem; }
  .app-grid { gap: 1rem; padding: 1rem 1.25rem 1.25rem; }
  .panel-title { font-size: 1rem; }
  .card-header { padding: 0.75rem 0.9rem 0.5rem; }
  .card-body { padding: 0.75rem 0.9rem; gap: 0.5rem; }
  .role-list { gap: 0.75rem; }
  .role-list li { padding: 0.6rem; }
  .field { gap: 0.3rem; font-size: 0.82rem; }
  select, textarea { padding: 0.4rem 0.6rem; font-size: 0.85rem; }
  textarea { min-height: 120px; }
  .pill { padding: 0.25rem 0.5rem; font-size: 0.72rem; line-height: 1.05; }
  .tag-row, .champ-tags { gap: 0.4rem; }
  .list li { padding: 0.6rem; }
}
.champ-tags { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 0.5rem; }
